# CIP4 XJDF Java Library
 [![Maven Central](https://maven-badges.herokuapp.com/maven-central/org.cip4.lib.xjdf/xJdfLib/badge.svg)](https://maven-badges.herokuapp.com/maven-central/org.cip4.lib.xjdf/xJdfLib) [![License (CIP4 Software License)](https://img.shields.io/badge/license-CIP4%20Software%20License-blue)](https://github.com/cip4/xJdfLib/blob/master/LICENSE.md) ![Snapshot](https://github.com/cip4/xJdfLib/workflows/Snapshot/badge.svg)
 
 The CIP4 XJDF Java Library.
 
 <br />
 
 ## Quick Start
 The following code sample illustrates how to use the XJDF Library to create XJDF Documents:

```java
final String jobId = "JOB_42";

 // create new XJDF Document
 XJdfDocument xJdfDoc = new XJdfDocument(jobId, new String[]{"ConventionalPrinting", "Cutting"});

 // create preview resources (partitioned by PreviewType)
 Map<Part, Preview> previews = new HashMap<>();

 previews.put(
     new Part().withPreviewType(Part.PreviewType.IDENTIFICATION),
     new Preview().withFileSpec(new FileSpec().withURL(new URI(identification, jobId + "-identification.pdf")))
 );

 previews.put(
     new Part().withPreviewType(Part.PreviewType.THUMB_NAIL),
     new Preview().withFileSpec(new FileSpec().withURL(new URI(thumb, jobId + ".jpg")))
 );

 xJdfDoc.addResourceSet(previews, ResourceSet.Usage.INPUT);

 // create runlist resources
 xJdfDoc.addResourceSet(
     new RunList().withFileSpec(new FileSpec().withURL(new URI(artwork, jobId + ".pdf"))),
     ResourceSet.Usage.INPUT
 );

 // create xjdf package
 ByteArrayOutputStream bos = new ByteArrayOutputStream();
 XJdfPackager xjdfPackager = new XJdfPackager(bos);
 xjdfPackager.setCompressionLevel(AbstractXmlPackager.CompressionLevel.DEFAULT_COMPRESSION); // optional
 xjdfPackager.packageXjdf(xJdfDoc.getXjdf());

 // write result
System.out.println(new String(bos.toByteArray()));
```
**Result:**
```xml
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!-- Generated by CIP4 xJdfLib 0.x-SNAPSHOT -->
<xjdf:XJDF JobID="JOB_42" Types="ConventionalPrinting Cutting" xmlns:xjdf="http://www.CIP4.org/JDFSchema_2_0">
    <xjdf:ResourceSet Name="Preview" Usage="Input">
        <xjdf:Resource>
            <xjdf:Part PreviewType="ThumbNail"/>
            <xjdf:Preview>
                <xjdf:FileSpec URL="JOB_42.jpg"/>
            </xjdf:Preview>
        </xjdf:Resource>
        <xjdf:Resource>
            <xjdf:Part PreviewType="Identification"/>
            <xjdf:Preview>
                <xjdf:FileSpec URL="JOB_42-identification.pdf"/>
            </xjdf:Preview>
        </xjdf:Resource>
    </xjdf:ResourceSet>
    <xjdf:ResourceSet Name="RunList" Usage="Input">
        <xjdf:Resource>
            <xjdf:RunList>
                <xjdf:FileSpec URL="JOB_42.pdf"/>
            </xjdf:RunList>
        </xjdf:Resource>
    </xjdf:ResourceSet>
</xjdf:XJDF>
```
 <br />
 
 ## Issue Tracking
Don't write issues, provide Pull-Requests!

<br />

## Development Notes
### Release a new Version
Creation and publishing of a new version to GitHub Release and to the Central Maven Repository. 

**NOTE:** The publication to the Central Maven Repository may take up to two hours.

```bash
$ git tag -a [VERSION] -m "[TITLE]"
$ git push origin [VERSION]
```

In case a build has been failed, a tag can be deleted using the following command:
```bash
$ git tag -d [VERSION]
$ git push origin :refs/tags/[VERSION]
```

